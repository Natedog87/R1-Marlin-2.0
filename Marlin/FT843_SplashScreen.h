/*
 * SplashScreen.h
 *
 * Created: 16/10/2014 10:49:59 AM
 *  Author: Sherif
 */ 


#ifndef SPLASHSCREEN_H_
#define SPLASHSCREEN_H_

#include "FT843_ScreenBase.h"

#define SPLASH_DATASIZE (3908)
#define SPLASH_INFLATED (51480)

PROGMEM prog_uchar splashImage[SPLASH_DATASIZE] = {
	120,156,237,93,75,108,219,200,25,222,163,111,77,99,7,251,232,118,139,28,125,76,215,114,54,216,52,5,124,204,45,6,34,9,217,198,123,240,49,183,108,219,88,118,156,232,160,3,11,80,133,89,152,173,105,137,54,120,224,65,7,217,235,110,29,172,99,201,6,124,208,65,7,217,14,90,45,214,241,90,7,31,116,16,80,197,102,81,1,171,96,213,249,57,164,196,199,80,150,23,16,103,180,229,255,65,20,37,206,136,223,140,230,155,55,103,90,173,192,2,11,44,176,192,2,11,44,176,192,2,195,38,107,75,197,191,100,174,8,251,92,137,251,55,95,226,246,209,139,2,140,187,214,249,123,210,127,54,62,168,180,154,189,242,191,93,189,246,226,158,92,231,117,254,52,152,35,236,235,128,179,159,9,143,229,240,222,124,221,139,109,190,145,88,152,224,216,69,97,137,223,104,156,244,158,122,110,85,75,91,213,244,52,79,155,55,70,98,97,72,185,178,55,231,25,251,96,149,230,82,241,73,161,43,244,235,223,150,43,205,182,251,238,62,244,235,95,191,58,105,116,238,34,215,255,153,125,195,175,39,246,17,214,13,116,206,232,96,95,199,164,180,84,188,248,127,61,42,63,150,247,153,96,111,114,192,108,246,185,175,212,167,53,178,178,38,184,235,137,119,226,215,19,44,67,93,252,162,116,113,236,111,150,171,105,187,63,122,225,130,59,191,19,199,247,159,224,70,213,91,85,47,214,178,182,22,71,72,232,71,47,36,0,147,50,104,69,174,91,175,172,123,249,68,255,253,61,201,188,71,179,60,41,158,115,135,220,1,250,182,235,125,124,198,126,226,128,59,67,120,247,69,165,75,201,181,163,221,124,9,174,14,184,117,136,135,120,150,50,235,246,253,19,7,136,255,57,119,85,56,122,69,82,214,52,143,211,0,171,48,211,106,105,235,164,75,236,231,27,165,45,200,35,112,170,102,7,152,209,4,55,205,47,18,98,31,108,69,187,42,156,241,135,220,25,111,28,57,2,120,72,87,135,156,132,114,247,188,6,238,222,24,46,61,125,32,247,103,60,190,195,209,171,225,228,112,242,28,167,203,196,154,158,227,174,209,67,188,125,212,207,14,56,96,87,206,122,105,107,183,177,169,130,139,51,14,231,33,235,70,170,110,255,18,13,254,113,243,184,158,56,211,249,31,185,114,126,92,27,164,149,179,247,10,92,183,226,55,188,117,53,170,98,55,180,153,118,227,239,165,45,185,62,127,33,30,86,199,4,141,143,238,64,14,254,49,58,251,100,103,190,14,254,86,234,243,53,162,143,218,152,56,44,192,175,191,45,135,196,16,242,177,143,74,44,7,220,223,244,31,156,237,174,250,249,33,55,38,132,132,247,95,144,99,231,155,76,8,93,61,228,108,191,64,131,57,57,238,208,251,57,15,12,127,115,234,76,147,234,34,43,173,146,238,152,230,167,249,236,38,57,246,71,85,184,74,155,225,69,236,167,249,203,180,24,157,246,7,41,36,204,238,161,60,92,187,143,148,146,186,176,109,242,71,249,190,8,37,226,146,28,17,71,4,114,185,70,31,231,250,113,56,25,17,35,226,49,161,198,63,183,19,17,199,197,115,190,227,150,41,240,152,211,136,16,21,151,148,21,91,123,58,223,40,44,37,22,240,255,206,54,18,11,128,242,145,59,246,75,91,248,26,118,69,155,103,55,254,213,116,90,115,178,175,52,115,165,11,81,76,21,35,82,68,154,43,64,153,245,68,138,136,185,139,148,213,92,82,102,228,86,235,179,157,24,82,22,212,87,216,6,202,53,36,73,222,117,196,206,84,53,38,199,164,17,97,248,79,180,249,93,132,39,82,76,126,186,103,87,86,53,173,46,14,14,134,20,103,107,235,65,141,54,167,203,160,180,229,148,192,110,35,38,93,0,25,142,179,114,76,78,23,192,253,178,18,147,243,23,246,232,188,84,151,149,74,99,91,73,201,33,97,4,33,36,92,211,223,217,66,72,24,67,71,120,197,164,156,252,157,35,84,114,33,39,207,32,101,141,36,193,77,136,58,91,39,174,33,86,24,168,22,33,231,84,107,206,0,202,42,44,13,18,156,53,170,43,123,180,25,93,6,238,82,107,183,145,86,210,114,87,40,248,149,82,118,138,224,62,167,166,93,105,208,101,205,227,204,182,250,67,57,135,84,24,18,198,197,176,56,142,142,172,34,44,132,197,136,148,83,142,51,21,203,72,65,5,133,33,167,68,80,221,55,44,234,33,96,16,6,43,20,183,203,114,78,177,254,43,249,198,144,82,77,15,18,236,109,45,232,187,160,205,232,114,112,141,31,52,63,175,78,93,136,59,167,72,79,74,30,148,165,193,89,47,202,202,169,15,119,144,178,80,221,49,42,69,69,104,201,160,119,166,128,24,137,38,187,25,17,229,250,202,148,101,116,98,170,154,83,82,10,114,37,177,199,220,2,17,135,34,134,216,127,248,119,123,202,28,82,134,148,81,117,48,0,92,173,185,254,173,42,102,63,24,33,0,174,222,61,156,221,237,216,84,86,99,27,157,157,120,244,51,90,220,35,101,189,205,230,148,101,185,83,163,100,27,144,235,255,80,238,132,0,74,220,212,0,240,54,129,202,92,181,83,230,230,27,119,51,163,234,221,204,160,0,210,231,123,150,254,205,205,50,124,67,155,213,101,248,223,205,56,91,138,119,78,47,198,71,149,156,154,146,87,218,101,214,252,222,84,119,31,149,99,53,167,162,23,74,155,29,44,51,135,14,179,20,170,241,34,101,89,114,140,147,82,78,1,254,203,140,114,183,135,0,241,71,57,67,167,165,117,210,120,148,189,155,121,148,237,128,223,176,126,98,11,252,6,164,78,107,255,224,226,43,96,111,114,102,153,59,102,7,252,243,13,171,174,244,118,86,47,64,41,239,87,21,163,157,133,106,73,57,253,219,109,15,151,40,149,202,160,44,72,173,219,74,14,67,206,41,236,97,187,125,220,150,237,202,218,41,90,184,15,8,58,202,250,174,193,118,106,36,193,174,44,218,108,46,15,217,214,135,129,148,210,155,178,80,57,101,186,79,181,245,147,146,187,185,135,50,171,147,122,7,1,86,101,229,139,94,174,182,41,231,17,16,159,105,226,21,139,178,154,217,77,126,99,176,96,237,29,220,44,211,102,227,5,92,70,145,174,216,203,172,86,235,243,106,119,60,171,78,161,227,106,189,87,247,186,143,218,115,228,126,165,254,188,254,188,134,96,125,103,24,171,117,107,223,224,110,195,229,2,133,225,89,231,28,135,201,95,24,119,127,86,51,24,216,96,31,43,126,170,205,213,7,11,214,118,74,190,65,114,145,214,240,203,60,167,9,231,253,221,99,197,129,5,22,88,96,129,5,22,88,96,129,5,22,88,96,129,13,138,85,154,131,134,30,249,55,186,61,41,217,111,235,149,255,73,115,208,96,15,103,175,238,252,181,222,249,247,211,222,102,143,51,8,234,224,192,58,7,227,187,18,209,141,30,34,185,135,39,252,251,99,187,90,151,56,205,236,182,251,54,79,154,245,173,210,128,193,58,7,163,124,228,237,206,235,73,195,254,27,60,225,108,34,187,137,95,29,56,123,221,251,103,48,166,204,54,218,227,113,198,187,117,214,150,92,188,104,108,143,134,237,106,219,74,123,150,180,3,182,57,24,63,225,241,172,73,106,249,90,190,209,141,191,127,202,194,115,48,204,145,213,20,213,209,85,226,136,171,206,43,45,155,35,175,118,101,229,117,101,217,71,185,211,120,148,92,153,47,248,21,135,78,219,213,76,174,214,249,35,57,162,178,200,227,153,172,226,81,214,174,44,47,246,143,178,129,178,64,89,214,121,131,204,195,54,35,23,148,149,34,242,79,43,50,77,101,121,196,170,99,222,96,211,107,166,0,155,112,206,110,2,101,145,248,195,183,116,149,69,142,85,248,214,79,101,165,148,148,49,111,212,62,123,148,29,88,121,165,229,143,94,91,98,177,136,83,240,178,195,61,117,101,41,166,178,150,101,43,63,123,153,149,255,9,207,27,164,167,172,180,214,141,191,127,179,48,160,204,162,61,23,188,119,64,219,229,153,101,237,62,172,44,178,75,186,101,22,153,85,202,161,44,231,92,119,182,65,154,235,78,230,127,55,67,87,89,94,172,252,87,86,76,154,69,192,71,182,16,107,243,130,167,179,210,202,219,172,117,197,92,172,172,88,219,69,204,56,178,160,172,14,159,78,72,82,178,91,89,131,5,183,178,200,184,65,45,246,211,90,55,254,254,42,139,246,243,128,189,2,106,83,214,86,22,86,214,50,225,201,199,89,6,148,69,12,129,171,204,26,172,39,7,71,85,187,178,188,216,143,170,116,149,69,230,5,223,250,173,172,25,4,124,100,13,29,86,160,171,227,140,125,164,117,71,87,150,219,23,27,202,114,135,197,169,44,156,90,59,112,126,102,15,78,101,121,129,182,178,200,113,234,183,178,102,164,168,52,163,175,35,129,83,64,212,56,118,190,233,47,162,142,23,224,73,251,26,6,212,239,114,234,148,99,133,110,92,102,69,219,191,98,30,99,18,125,101,89,227,18,98,23,231,14,78,101,13,198,26,18,38,134,148,77,75,157,225,139,146,23,123,216,171,128,70,204,131,165,53,175,149,57,224,91,31,149,149,1,101,233,43,160,72,17,209,92,207,37,34,182,33,245,25,198,125,162,150,163,253,44,34,226,242,42,45,255,224,90,73,18,148,53,43,91,92,27,191,199,128,178,148,246,234,56,109,110,81,151,178,240,186,39,78,152,235,206,144,174,249,5,175,187,59,149,229,5,218,202,34,135,200,111,101,217,148,228,51,194,198,49,236,113,125,70,194,61,106,168,188,58,117,179,199,202,114,250,13,35,95,244,149,69,10,77,111,202,98,25,131,160,172,110,252,253,84,86,74,198,41,187,3,248,28,147,253,90,177,5,198,121,98,82,216,80,89,184,173,181,136,4,227,194,120,142,197,195,157,85,242,62,57,69,104,37,134,69,39,162,12,40,203,205,10,41,75,177,174,229,137,215,235,179,255,243,248,51,172,141,71,123,45,66,147,139,149,91,53,109,87,22,118,231,4,124,75,87,89,36,86,248,91,63,219,89,160,44,115,13,207,48,62,19,198,5,88,127,44,109,204,200,233,55,96,86,149,121,231,16,94,249,82,231,163,247,89,168,243,133,231,68,85,129,97,101,25,236,59,235,144,10,12,40,75,30,23,45,172,112,172,138,246,85,114,7,111,37,79,187,178,38,139,222,238,234,121,26,49,15,134,149,229,149,91,248,219,131,17,22,97,167,140,54,244,79,179,72,89,191,173,60,243,97,93,140,213,26,94,77,20,238,58,110,229,33,204,72,246,149,47,221,6,43,204,96,159,118,68,68,6,148,229,98,53,46,244,170,44,88,41,185,124,244,160,70,7,245,252,96,43,171,91,206,224,107,109,80,25,23,221,105,115,214,214,34,232,175,61,175,193,236,63,18,11,40,57,239,84,188,125,178,172,44,55,43,125,101,119,197,174,44,239,85,200,187,239,3,218,79,187,81,240,102,101,125,58,100,178,232,237,142,174,178,122,95,217,189,127,166,167,1,209,189,210,63,244,174,173,250,246,223,222,126,9,189,212,176,235,129,13,73,80,200,235,140,247,51,140,249,34,244,193,185,217,135,81,189,139,230,92,247,109,101,89,118,238,222,48,166,231,20,219,54,101,117,219,49,129,158,178,186,237,131,16,40,171,87,219,86,33,13,12,39,245,84,109,166,236,228,112,18,102,8,173,250,198,98,181,190,44,207,202,99,132,189,60,128,199,47,95,123,249,75,23,83,250,14,69,78,95,176,59,193,83,106,109,232,29,45,165,160,208,184,88,161,208,200,41,135,178,188,247,164,161,169,44,111,86,118,101,93,102,71,29,191,44,173,21,150,188,88,21,150,252,83,214,178,162,239,62,229,218,237,9,198,102,87,124,252,111,127,241,98,150,184,139,23,212,75,191,207,122,249,74,23,156,190,70,218,190,232,41,107,87,131,25,87,160,119,123,88,70,146,48,134,240,211,81,214,141,66,160,44,111,147,20,168,133,157,243,246,52,112,206,195,206,25,126,42,235,89,53,134,234,131,164,29,221,96,220,247,216,227,217,239,116,33,38,193,126,143,216,165,198,155,236,199,80,89,247,25,53,101,173,212,99,114,84,28,54,98,85,179,196,109,84,66,177,106,81,22,164,1,188,103,162,29,144,10,30,120,246,136,246,219,234,121,184,63,153,149,91,89,100,119,244,148,53,87,55,99,213,201,13,120,249,167,172,37,212,78,129,52,224,196,184,56,35,249,169,44,216,123,50,42,133,4,55,147,17,33,42,109,169,100,63,169,130,211,143,198,153,126,102,228,111,51,116,176,149,129,177,119,119,72,52,148,95,205,56,148,69,210,21,6,189,121,79,221,88,89,119,160,186,81,240,118,87,88,162,197,126,72,241,102,229,167,178,158,232,181,169,115,238,156,179,164,1,244,41,36,68,124,86,214,84,13,198,82,53,190,205,132,195,76,206,185,113,33,34,190,45,147,252,204,21,96,87,186,182,203,182,175,145,36,189,89,37,24,55,69,91,156,114,102,126,133,98,181,71,101,177,137,94,149,197,38,252,85,150,185,123,182,29,176,139,162,191,202,106,181,222,127,65,222,137,124,56,121,83,252,155,74,234,33,156,43,140,35,31,135,174,61,195,205,148,172,185,202,13,63,112,85,175,3,144,246,50,15,57,148,165,46,210,222,27,251,178,176,42,235,202,30,109,54,151,69,98,193,191,214,107,24,106,83,220,1,119,104,224,204,120,31,17,66,190,43,235,89,13,198,124,128,205,89,155,9,102,118,13,177,249,176,226,246,241,178,20,210,149,213,225,125,200,189,209,125,29,180,143,116,96,13,131,249,14,249,213,125,113,103,160,149,101,239,27,164,205,230,178,72,44,248,87,102,221,151,32,101,30,184,0,253,107,126,43,171,213,250,38,123,13,181,154,58,186,48,222,19,231,72,91,127,85,90,174,82,235,118,5,198,8,28,220,19,132,51,31,97,101,126,232,184,50,34,220,151,58,101,47,86,214,4,199,26,200,156,112,218,180,174,55,216,56,129,111,188,126,129,102,200,220,247,198,236,11,75,254,173,229,57,134,90,89,122,26,180,97,63,161,241,35,130,236,187,178,30,214,198,4,224,179,175,115,48,121,193,39,232,195,126,233,218,121,249,164,137,114,134,164,193,218,21,10,70,128,53,142,66,1,237,191,134,101,167,92,185,145,88,160,151,250,126,12,212,69,251,46,63,234,34,109,70,151,195,143,221,167,248,199,152,174,44,244,175,219,177,142,82,193,176,48,79,97,68,165,177,49,156,60,227,214,13,22,29,62,135,168,20,21,21,183,251,79,94,106,60,184,255,210,21,6,86,96,198,46,138,83,212,238,107,90,158,49,203,15,144,178,174,39,224,152,221,180,199,126,105,171,115,205,126,198,38,202,174,39,252,250,103,31,139,231,28,252,235,118,172,161,148,172,241,52,148,117,251,20,90,255,29,30,248,29,24,158,113,231,252,145,107,92,11,187,63,208,221,186,195,65,31,107,237,48,28,32,254,191,183,229,13,184,204,186,158,24,12,64,202,116,142,177,61,168,97,61,177,15,224,169,46,246,55,237,218,237,170,0,57,62,252,255,107,113,227,8,239,113,72,7,52,148,213,106,253,119,227,12,213,158,12,30,232,125,221,96,117,128,212,254,107,209,221,67,248,238,11,228,158,195,172,13,63,44,161,29,10,232,193,176,231,12,249,198,52,79,59,197,93,6,143,8,115,97,248,13,218,172,122,135,191,107,205,255,92,176,164,74,11,32,29,207,83,153,5,48,95,59,208,149,146,141,155,188,178,198,59,180,87,220,165,86,165,57,41,29,162,114,215,240,193,28,254,28,55,184,115,55,119,236,204,77,101,189,19,103,27,56,93,170,139,164,245,101,79,154,234,34,14,3,187,225,192,252,253,158,21,242,134,223,79,100,227,73,29,89,253,133,63,65,237,133,142,178,90,173,127,168,95,162,124,62,105,48,201,198,205,179,181,248,126,226,6,161,212,250,93,245,141,94,31,52,195,193,18,128,211,122,28,216,253,203,149,227,231,27,19,60,187,233,209,158,50,19,11,183,170,78,254,216,110,85,113,125,144,54,203,238,252,73,229,109,127,237,13,106,211,144,82,4,164,98,90,202,154,175,238,115,107,100,86,40,133,126,75,40,211,63,61,189,34,172,51,169,45,92,155,93,79,68,118,220,172,229,198,4,71,59,213,245,134,106,186,219,8,235,123,167,211,60,109,134,222,0,205,211,120,166,5,165,97,143,20,177,70,77,89,173,214,99,197,205,42,171,99,45,126,79,38,205,198,120,90,251,42,131,107,95,236,168,203,168,207,38,30,203,223,19,251,164,100,141,229,156,222,196,4,87,218,186,104,20,104,174,126,55,67,155,167,23,236,207,65,251,103,87,132,18,71,70,157,82,15,6,216,167,167,117,222,139,87,137,251,218,163,37,250,193,235,175,50,222,225,161,129,58,255,88,33,149,177,216,88,239,117,159,230,97,206,122,175,243,129,202,71,163,42,91,225,153,230,135,20,122,59,228,5,22,88,96,129,5,22,88,96,129,5,246,255,108,255,3,231,52,147,55,
};

typedef struct SplashScreenData
{
	Bitmap_header_t* splashHeader;
	
	uint32_t splashLocation;
	uint32_t ram_ptr;
	
}SplashScreenData_t;

class SplashScreen : public ScreenBase
{
	public:
		virtual void addControls(uint8_t alpha)
		{
			this->drawRectangle(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT, CLR_WHITE);
			this->drawBitmap(data->splashLocation, data->splashHeader, 25, 100, alpha);
		}
		
		virtual void displayControls(uint8_t alpha)
		{
			loadImages();
			FTObj.Cmd_DLStart();
			this->clear();
			addControls(alpha);
			FTObj.DLEnd();
			FTObj.Cmd_Swap();
		}
		
		virtual void loadImages()
		{
			data->splashLocation = this->addImageInMemory(splashImage, SPLASH_DATASIZE, SPLASH_INFLATED, data->splashHeader, &data->ram_ptr);
		}
		
		void animate()
		{
			this->clearScreen();
			delay(30);
			this->clearScreen();
			delay(30);
			this->clearScreen();
			
			loadImages();
			data->ram_ptr = 0L;
			loadImages();
			
			for (int i = 0; i < 255; i++)
			{
				FTObj.DLStart();
				addControls(i);
				FTObj.DLEnd();
				FTObj.Cmd_Swap();
				delay(10);
			}
		}
		
		virtual void tagPressed(uint8_t tag)
		{
			
		}
		
		virtual uint8_t tagReleased(uint8_t tag)
		{
			return 1;
		}
		
		virtual void addHeader()
		{
			
		}
		
		virtual void drawHeader()
		{
			
		}
		
		virtual uint8_t process()
		{
			return 0;
		}
		
		void init()
		{
			data = (SplashScreenData_t*)malloc(sizeof(SplashScreenData_t));
			data->ram_ptr = 0L;
			data->splashHeader = &Bitmap_headers[0];
		}
		
		virtual void freeMem()
		{
			free(data);
		}
		
		SplashScreenData_t* data;
	private:
		
};

#endif /* SPLASHSCREEN_H_ */